<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HAR Analyzer - Analizador de Archivos HAR Online Gratis</title>
    <meta name="description"
        content="Herramienta gratuita para visualizar, analizar y depurar archivos .HAR. Filtra peticiones HTTP, inspecciona cabeceras y exporta a cURL. Ideal para desarrolladores y QA.">
    <meta name="keywords"
        content="HAR analyzer, har viewer, analizar archivo har, depurar red, http debugger, har to curl">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://haranalyzer.es/">
    <meta property="og:title" content="HAR Analyzer - Analizador de Archivos HAR Online">
    <meta property="og:description"
        content="Visualiza y analiza logs de red fácilmente. Sube tu archivo .HAR y depura tus peticiones HTTP en segundos.">
    <meta property="og:image" content="https://haranalyzer.es/static/og-image.png">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://haranalyzer.es/">
    <meta property="twitter:title" content="HAR Analyzer - Analizador de Archivos HAR Online">
    <meta property="twitter:description"
        content="Visualiza y analiza logs de red fácilmente. Sube tu archivo .HAR y depura tus peticiones HTTP en segundos.">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css', v=version) }}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    {% if ga_id %}
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id={{ ga_id }}"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', '{{ ga_id }}');
    </script>
    {% endif %}
</head>

<body>
    <div class="container">
        <header class="main-header">
            <h1>HAR Analyzer</h1>
            <p>Upload a .HAR file to analyze network requests.</p>
        </header>

        <form id="upload-form" class="controls-grid">
            <div class="card file-upload-card">
                <h2>Upload File</h2>
                <div id="drop-zone">
                    <input type="file" id="har-file" name="har_file" accept=".har" required>
                    <p>Drag & drop a .HAR file here, or click to select.</p>
                </div>
                <div id="file-info" class="file-info-hidden">
                    Selected file: <span id="file-name"></span>
                </div>
            </div>

            <div class="card options-card">
                <div class="options-header">
                    <h2>Options</h2>
                    <button type="button" id="clear-filters-btn" class="secondary-button">Clear Filters</button>
                </div>
                <div class="options-grid">
                    <!-- Filtering -->
                    <fieldset>
                        <legend>Filter by Error</legend>
                        <select name="error-filter" id="error-filter">
                            <option value="">All Requests</option>
                            <option value="no-errors">No Errors</option>
                            <option value="has-errors">With Errors</option>
                        </select>
                    </fieldset>
                    <fieldset>
                        <legend>Filter by Method</legend>
                        <div class="checkbox-group">
                            <label><input type="checkbox" name="method" value="GET"> GET</label>
                            <label><input type="checkbox" name="method" value="POST"> POST</label>
                            <label><input type="checkbox" name="method" value="PUT"> PUT</label>
                            <label><input type="checkbox" name="method" value="DELETE"> DELETE</label>
                            <label><input type="checkbox" name="method" value="OPTIONS"> OPTIONS</label>
                        </div>
                    </fieldset>
                    <fieldset>
                        <legend>Filter by Content Type</legend>
                        <div class="checkbox-group">
                            <label><input type="checkbox" name="content-type" value="json"> JSON</label>
                            <label><input type="checkbox" name="content-type" value="javascript"> JS</label>
                            <label><input type="checkbox" name="content-type" value="css"> CSS</label>
                            <label><input type="checkbox" name="content-type" value="image"> Image</label>
                            <label><input type="checkbox" name="content-type" value="html"> HTML</label>
                        </div>
                    </fieldset>
                    <fieldset>
                        <legend>Filter by URL</legend>
                        <input type="text" name="url-contains" id="url-contains" placeholder="e.g., /api/v1">
                    </fieldset>
                    <fieldset>
                        <legend>URL Length Limit</legend>
                        <input type="number" name="max-url-len" id="max-url-len" placeholder="e.g., 250" min="0">
                    </fieldset>
                    <fieldset>
                        <legend>Group By</legend>
                        <select name="group-by" id="group-by">
                            <option value="">None</option>
                            <option value="method">Method</option>
                            <option value="content-type">Content Type</option>
                            <option value="status">Status Code</option>
                            <option value="domain">Domain</option>
                        </select>
                    </fieldset>
                    <fieldset class="full-width">
                        <legend>Search in Response Body</legend>
                        <div class="input-with-checkbox">
                            <input type="text" name="content-contains" id="content-contains"
                                placeholder="e.g., user_id">
                            <label class="regex-label" title="Use regular expressions for advanced searching">
                                <input type="checkbox" name="content-regex" id="content-regex" value="true">
                                Regex
                            </label>
                        </div>
                    </fieldset>
                    <!-- Domain Filter -->
                    <fieldset id="domain-filter-fieldset" class="hidden full-width">
                        <legend>Filter by Domain</legend>
                        <div class="multiselect">
                            <div class="select-box" id="domain-select-box">
                                <span class="select-text">Select domains</span>
                                <span class="select-arrow">&#9662;</span>
                            </div>
                            <div id="domain-checkboxes" class="hidden">
                                <!-- Checkboxes will be dynamically inserted here -->
                            </div>
                        </div>
                    </fieldset>
                </div>
            </div>

            <button type="submit" class="analyze-button">Analyze</button>
        </form>

        <section id="results-section" class="results-hidden">
            <div class="results-header">
                <h2>Analysis Results</h2>
                <button id="download-har-btn" class="hidden">Download Filtered .HAR</button>
            </div>
            <div id="spinner" class="spinner-hidden"></div>
            <div id="results-container"></div>
        </section>

    </div>

    <!-- Sección de Contenido SEO / AdSense -->
    <section class="content-section" style="max-width: 800px; margin: 4rem auto; padding: 0 1rem;">
        <article class="card" style="padding: 2rem;">
            <h2>¿Qué es un archivo HAR?</h2>
            <p>Un archivo <strong>HAR (HTTP Archive)</strong> es un formato estandarizado basado en JSON para registrar
                la
                interacción de un navegador web con un sitio. Contiene un registro detallado de todas las peticiones de
                red (imágenes, scripts, XHR) que se realizan al cargar una página.</p>

            <h3>¿Para qué sirve esta herramienta?</h3>
            <p>HAR Analyzer te permite visualizar estos archivos de forma amigable. Es útil para:</p>
            <ul>
                <li><strong>Depurar problemas de rendimiento:</strong> Identifica peticiones lentas o pesadas.</li>
                <li><strong>Análisis de seguridad:</strong> Revisa cabeceras, cookies y datos enviados.</li>
                <li><strong>Soporte técnico:</strong> Envía logs de red a desarrolladores para reproducir errores.</li>
            </ul>

            <h3>Cómo exportar un archivo HAR</h3>
            <ol>
                <li>Abre las Herramientas de Desarrollador (F12) en tu navegador (Chrome, Firefox, Edge).</li>
                <li>Ve a la pestaña <strong>Red (Network)</strong>.</li>
                <li>Navega por la página que quieres analizar.</li>
                <li>Haz clic derecho en la lista de peticiones y selecciona "Guardar todo como HAR con contenido" (Save
                    all as HAR with content).</li>
            </ol>

            <h3>Preguntas Frecuentes (FAQ)</h3>
            <details>
                <summary><strong>¿Es seguro subir mis archivos aquí?</strong></summary>
                <p>Sí. El procesamiento se realiza en memoria y los archivos no se guardan permanentemente en nuestros
                    servidores. Recomendamos "sanitizar" (limpiar) cualquier dato sensible (contraseñas, tokens) antes
                    de subir el archivo si tienes preocupaciones estrictas de privacidad.</p>
            </details>
            <details style="margin-top: 1rem;">
                <summary><strong>¿Existe un límite de tamaño?</strong></summary>
                <p>Sí, actualmente el límite es de <strong>25MB</strong> para garantizar el rendimiento del servidor
                    gratuito. Para
                    archivos más grandes, te recomendamos usar herramientas de escritorio.</p>
            </details>
        </article>
    </section>

    <!-- Footer Legal -->
    <footer style="text-align: center; margin: 3rem 0; color: #666; font-size: 0.9rem;">
        <p>&copy; 2025 HAR Analyzer. Todos los derechos reservados.</p>
        <p>
            <a href="/privacy" style="color: inherit; text-decoration: underline;">Política de Privacidad</a> |
            <a href="/terms" style="color: inherit; text-decoration: underline;">Términos de Uso</a>
        </p>
    </footer>
    <script src="{{ url_for('static', filename='script.js', v=version) }}"></script>

    <div id="modal" class="modal-hidden">
        <div id="modal-overlay"></div>
        <div id="modal-content">
            <div class="modal-header">
                <h2>Request Details</h2>
                <div class="modal-actions">
                    <button id="copy-curl-btn">Copy as cURL</button>
                    <button id="modal-close-btn">&times;</button>
                </div>
            </div>
            <div class="modal-body">
                <div class="modal-tabs">
                    <div>
                        <button class="modal-tab-btn active" data-tab="general">General</button>
                        <button class="modal-tab-btn" data-tab="headers">Headers</button>
                        <button class="modal-tab-btn" data-tab="response">Response</button>
                        <button class="modal-tab-btn" data-tab="preview">Preview</button>
                        <button class="modal-tab-btn" data-tab="timings">Timings</button>
                    </div>
                    <button id="download-response-btn">Download Response</button>
                </div>
                <div class="modal-tab-content">
                    <div class="modal-tab-pane active" data-tab-content="general"></div>
                    <div class="modal-tab-pane" data-tab-content="headers"></div>
                    <div class="modal-tab-pane" data-tab-content="response">
                        <pre id="response-content-pre"></pre>
                    </div>
                    <div class="modal-tab-pane" data-tab-content="preview"></div>
                    <div class="modal-tab-pane" data-tab-content="timings"></div>
                </div>
            </div>
        </div>
    </div>

    <div id="download-options-modal" class="modal-hidden">
        <div id="modal-overlay"></div>
        <div id="modal-content">
            <div class="modal-header">
                <h2>Download Options</h2>
                <button id="download-options-close-btn" class="modal-close-button">&times;</button>
            </div>
            <div class="modal-body">
                <p>Some requests were grouped. Choose how many instances to include in the downloaded .HAR file.</p>
                <div class="download-options-global-actions">
                    <span>Apply to all:</span>
                    <button type="button" class="secondary-button" data-action="all">Include All</button>
                    <button type="button" class="secondary-button" data-action="first">Include First</button>
                    <button type="button" class="secondary-button" data-action="manual">Select Manually</button>
                </div>
                <div id="download-options-list"></div>
            </div>
            <div class="modal-footer">
                <button id="download-confirm-btn" class="analyze-button">Download</button>
            </div>
        </div>
    </div>
</body>

</html>